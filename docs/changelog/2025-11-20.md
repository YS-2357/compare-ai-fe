# 2025-11-20 변경 로그

## 스트리밍 개선 & 문서 보강

- **상태 요약**: 부분 응답 스트리밍이 안정화되었고 문서/코드 주석이 보강됨
- **변경 내역**
  1. LangGraph 노드가 `END`로 직접 연결되어 모델별 완료 이벤트가 즉시 FastAPI 스트림으로 전달되도록 재구성
  2. `/api/ask`가 `StreamingResponse`로 partial/summary 이벤트를 전송하고, Streamlit이 해당 스트림을 소비하며 모델별 진행 상황을 실시간으로 표시하도록 업데이트
  3. `app/config.py`, `app/main.py`, `app/api/routes.py`, `app/services/langgraph.py`, `app/ui/streamlit_app.py`, `scripts/run_app.py` 등 주요 파일에 Args/Returns를 포함한 docstring을 추가해 코드 가독성 향상
  4. 포트 스캐닝 로직 제거와 고정 포트 환경변수 사용 안내를 README에 반영
  5. 의존성(예: pydantic-settings) 제거 및 config를 dataclass 기반으로 단순화
- **다음 단계**
  1. Phase 1 DB/인증 스켈레톤 파일(`database.py`, `models.py`, `auth.py`, `schemas.py`) 추가
  2. LangGraph 비동기 실행 + SSE/WebSocket 등 보다 정교한 스트리밍 방식 검토
  3. 테스트 및 모니터링 기준 수립 (간단한 e2e 호출 스크립트 포함)

---

## 미사용 진입점 정리

- **상태 요약**: FastAPI 경로가 스트리밍 흐름을 전담하면서 남아 있던 레거시 헬퍼를 제거해 코드 일관성을 확보
- **변경 내역**
  1. `app/services/langgraph.py`에서 `_aggregate_stream()`과 `run_graph()`를 삭제하고 스트리밍 API만 남김
  2. `app/services/__init__.py`의 `run_graph` export 제거로 잘못된 사용 가능성을 차단
- **다음 단계**
  1. Tavily 통합 시 필요한 경우 새 노드/상태 필드를 추가
  2. Async/Send API 전환 계획에 맞춰 LangGraph 모듈 리팩터링 착수
