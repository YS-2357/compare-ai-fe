# 2025-11-26 변경 로그

- **상태 요약**: 백엔드 전용 의존성 정리, Streamlit은 로컬용으로 유지, `pypdf` 충돌 해결
- **변경 사항**
  1. `requirements.txt`: Streamlit을 로컬 UI 용도로 유지(`streamlit==1.51.0`), Jupyter 섹션 제거, 한글 주석 제거(ASCII만 사용).
  2. `pypdf`를 4.3.1로 고정해 `langchain-upstage==0.7.5`의 `pypdf<5` 요구사항 충족.
  3. `.python-version`/`runtime.txt`로 Python 3.11.9 고정 확인.
- **로컬/배포 정책**
  - 로컬 개발: BE와 FE를 한 레포에서 함께 사용(현재 `app/ui` 포함, Streamlit 로컬 테스트용).
  - 배포: BE만 사용(uvicorn으로 FastAPI만 노출).
  - FE 레포(`compare-ai-fe`): BE 레포의 UI(`app/ui`)를 복사해 별도 서비스로 운영.
- **배포 시도**
  - Supabase(Auth), Upstash Redis(레이트리밋), Render(배포) 조합으로 빠른 배포 테스트 진행.
- **결과**
  - Render 배포 성공, 헬스체크 확인: `curl https://compare-ai-be.onrender.com/health` → 200 OK.
- **후속 변경**
  - `langchain-teddynote` 제거, Perplexity는 `langchain-perplexity`로 교체(PPLX_API_KEY 필수).
  - 요약 로직에 LCEL(프롬프트+파서 체인) 적용.
- **미해결/주의**
  - LangGraph 클래스화 및 LCEL 적용은 아직 미적용(추가 작업 필요).
  - Streamlit은 로컬 개발용으로만 사용 예정. 배포 시에는 제거하거나 별도 FE 레포(`compare-ai-fe`)에서 관리.
